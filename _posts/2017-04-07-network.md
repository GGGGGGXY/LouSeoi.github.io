---
layout: post
title:  "note of Network"
image: ''
date:   2017-04-07 12:54:43
tags:
- coding for fun
description: ''
categories:
- Learn 
---

#电路交换
电路交换是以电路连接为目的的交换方式，通信之前要在通信双方之间建立一条被双方独占的物理通道。
阶段：1）建立连接 2）通信 3）释放连接

- 优点：
1.双方用户专用，数据直达，延迟小。
2.建立通路后随时通信，实时性强。
3.双方通信时按发送顺序传送数据，不存在失序问题。
4.电路交换既适用传输模拟信号，也可以传输数字信号
5.设备控制简单

- 缺点：
1.建立连接时间长
2.信道利用率低
3.数据交换时终端匹配度要求高。

#分组交换
分组交换时以分组为单位进行传输和交换的，它是一种存储-转发交换方式，即将到达交换机的分组先送到存储器暂存再发送。

- 优点：
1.不需要建立专用通道，节约时间。
2.某条路径故障时还可以选择其他传输线路，提高传输效率。
3.提高信道利用率。
4.操作并行性。
5.分组较短，出错几率小。提高可靠性，减小延迟。
- 缺点：
1.存储的时候引起时延。
2.只能用数字信号。
3.会出现失序，丢失，重复分组。

#OSI七层结构（从上到下）
- 应用层 -> 网络服务和使用者应用程序间的一个借口
- 表示层 -> 数据表示 数据安全 数据压缩
- 会话层 -> 会话层到传输层的映射;会话连接的流量控制;数据传输;会话连接恢复与释放;会话连接管理,差错控制
- 传输层 -> 用一个寻址机制来标志一个特定的应用程序(端口号)
- 网络层(路由器) -> 基于网络层地址(IP)进行不同网络系统间的路径选择
- 数据链路层(网桥交换机) -> 在物理层上建立,撤销,标志逻辑连接和链路复用以及差错校验等功能,通过使用接受系统的硬件地址或者物理地址来寻址
- 物理层 -> 建立,维护,取消物理连接

#TCP/IP 四层模型
- 应用层(数据段) : 相当于应用层,表示层,会话层,常用协议:HTTP,FTP,DNS,Telnet等
- 传输层(数据包) : 相当于传输层,常用协议有TCP,UDP
- 网络互联层(数据帧) : 相当于网络层,常用协议有IP(网络层核心),ICMP(网络层补充),ARP(已知ip获取mac),RARP(通过mac地址获取ip)
- 传输层(比特) : 相当于物理层,数据链路层

#MAC地址
- 定义: 媒体访问控制,或称为物理地址,硬件地址,用来定义网络设备的位置。在OSI模型中，第三层网络层负责IP地址，第二层数据链路层负责MAC地址。
- 作用：就好像人的身份证一样，要用这个跟ip地址一一对应工作

#ARP地址解析协议
- 作用：根据ip地址获取物理地址。
- 过程：主机发送信息时将包含目标ip地址的ARP请求广播到网络上的所有计算机，并接受返回消息，存入自己的ARP表。

#CRC冗余校验算法，反码和校验算法
原理：将原码左移n位，除以生成多项式，得到校验码。

#透明传输
定义：不管过程的传输。

#路由表
- 定义：为经过路由器的每个数据包寻找一条最佳的传输路径，并将数据有效传送到目的站点。
- 分类：
1.静态路由表：出厂设置好
2.动态路由表：自动学
- 表项：目的地址、mask网络掩码，下一跳ip地址（说明ip包经过的下一个路由器）

#分组转发算法
```
提取目的主机的ip地址D，计算出目的主机的网络N（将D和掩码与操作）
若N就是与此路由器直接相连的某个网络的网络地址，直接交付，不经过其他路由器。
若路由表中有目的地址为D的特定主机路由器，则把数据报传送给路由器表中所指明的下一跳路由器，否则第四步
若路由表中有达到N的路由，则把数据包送给路由表中所知名的下一跳路由器，否则下一步。
如果3 4都没有找到，如果路由表中有默认路由，则传送给默认路由。
报告转发分组出错。
```

#IP报名的格式

#MTU的概念
- 定义：最大川书院，指某一种通信协议的某一层上面能通过的最大数据包大小

#RIP协议 路由选择信息协议
#ICMP 传输出错信息
#组播和多播的概念
#ip地址的分类
1. A类地址

  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。

2. B类地址

  B类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。

3. C类地址

  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。

实际上，还存在着D类地址和E类地址。但这两类地址用途比较特殊，在这里只是简单介绍一下：D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。

#DNS的概念，用途
定义：域名系统，运行在udp协议之上

#TCP和UDP区别和联系
- TCP：面向连接，丢包重发、乱次序的分包进行顺序控制、窗口控制等等，可靠性连接。
- UDP：利用ip提供无连接的通信服务，丢包不重发，乱序不管。
- 区别：udp用于实时性强，不考虑可靠性，例如打网络电话。

#TCP如何保证可靠
- 应用数据被分割成TCP合适的大小。
- 若没有收到确认，超时重传。
- 收到连接后发送确定。
- TCP首部校验和
- TCP重新排序
- 流量控制

#TCP三次握手 四次挥手
- 握手
```
第一次握手：CLient将标志位SYN置为1，然后一个值seq=J，发送给Server，Client进入SYN_SENT状态，等待确定
第二次握手：Server收到数据包由SYN = 1知道Client已经准备好，Server将SYN和ACK都置为1，ack = j+1，随机产生一个seq = K，发送，server进入SYN_RCVD状态。
第三次握手：Client收到确认后，检查ack是否为j+1，ACK是否为1，如果正确则将ACK = 1，ack = k + 1，Server检查ack和ACK，成功则进入ESABLISHED状态，完成握手。
```
- 挥手
```
第一次挥手：Client发送一个FIN，用来关闭数据传送，client进入FIN_WAIT_1状态。
第二次挥手：Server收到FIN，发送ACK给Client，确认序号为收到序号+1，Server进入CLOSE_WAIT状态
第三次挥手：Server发送一个FIN，关闭数据传送，Server进入LAST_ACK状态。
第四次挥手：Client收到FIN后，Client进入TIME_WAIT，接着发送一个ACK给Server，确认序号为收到序号+1，Server进入Closed状态，完成挥手。
```
- Time_Wait状态：停留两个MSL（最大生命周期）时间，防止主动关闭方的ACK最后未送达
防止前一个连接的数据在已断开后又发送，而被新连接收到。
